package client;

import java.sql.Date;

import javax.naming.InitialContext;
import javax.naming.NamingException;

import ejb.sessions.BatimentInconnuException;
import ejb.sessions.EntrepriseDejaExistanteException;
import ejb.sessions.EntrepriseInconnueException;
import ejb.sessions.ServicepfeprojetRemote;
import ejb.sessions.TechnicienInconnuException;


public class Main {
	public static void main(String[] args) throws EntrepriseDejaExistanteException, EntrepriseInconnueException, BatimentInconnuException, TechnicienInconnuException{
		try {
			InitialContext ctx = new InitialContext();
			System.out.println("Acces au service Remote");
			Object obj = ctx.lookup("ejb:pfeprojet/pfeprojetSessions/"+ "ServicepfeprojetBean!ejb.sessions.ServicepfeprojetRemote");
			ServicepfeprojetRemote service = (ServicepfeprojetRemote) obj;

			// Ajout Entreprises et Batiments
			service.ajouterEntreprise("Euratech","9,Lille","0612523645");
			service.ajouterEntreprise("TechMa", "7,Loos","0624587496");
			service.ajouterBatiment("Euratech", "BatimentA", "28, Lille");
			service.ajouterBatiment("Euratech", "BatimentB", "57, Lille");
			service.ajouterBatiment("TechMa", "BatimentA1", "7,Lille");
			// Ajout Techniciens
			service.ajouterTechnicien("Dupont", "1,Villeneuve d'ascq","0611223344");
			service.ajouterTechnicien("Dubois", "10, Villeneuve d'ascq", "0655667788");
			//Installation Exctincteurs
			//service.InstallationExtincteur(2016, "Entree", "RAS", "Installation effectue", Date.valueOf("2016-04-28"), "Dupont", "BatimentA1");
			// Affichage Liste des entreprise
			//service.affichagelisteEntreprise();
			//Affichage Liste des techniciens 
			//service.affichagelisteTechnicien();
			//Recherche d'une Entreprise par nom
			//				for(int i=0;i<service.rechercheEntrepriseparNom("Euratech").size();i++){
			//					System.out.println(service.rechercheEntrepriseparNom("Euratech").get(i).getNomEntreprise().toString());
			//				}
			//service.rechercheEntrepriseparNom("Euratech");
			//affichage liste batiments
			//service.affichagelisteBatiments("Euratech");
		}
		catch (NamingException e) {
			System.out.println("erreur acces au serveur de noms");
		}
	}
}
